<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>FandomEntryPass ‚Äì Ticket Exchange (PWA)</title>

  <!-- App / PWA -->
  <meta name="theme-color" content="#4face7">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="robots" content="noindex,nofollow">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icon-192.png" sizes="192x192">
  <link rel="apple-touch-icon" href="icon-192.png">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@500;700&family=Nunito:wght@400;600;700&family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">

  <!-- Tailwind -->
  <link rel="stylesheet" href="/output.css">

  <style>
    body {
      font-family: 'Nunito', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f7fb;
    }
    .font-display {
      font-family: 'Baloo 2', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    .font-heading {
      font-family: 'Poppins', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    .fep-gradient {
      background: linear-gradient(135deg, #ff8fab, #4face7, #7ee0cb);
    }
    .fep-card {
      box-shadow: 0 18px 45px rgba(25, 53, 72, 0.12);
    }
    .fep-pill {
      box-shadow: 0 10px 25px rgba(79, 172, 231, 0.35);
    }
    .fep-badge {
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.08);
    }
    .fep-scrollbar::-webkit-scrollbar {
      height: 8px;
    }
    .fep-scrollbar::-webkit-scrollbar-track {
      background: transparent;
    }
    .fep-scrollbar::-webkit-scrollbar-thumb {
      background: rgba(148, 163, 184, 0.7);
      border-radius: 999px;
    }
  </style>
</head>
<body class="min-h-screen flex flex-col bg-slate-50 text-slate-900">

  <!-- Main shell -->
  <div class="flex-1 flex flex-col">

    <!-- Header -->
    <header class="sticky top-0 z-40 border-b border-slate-200/80 bg-white/90 backdrop-blur">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="h-16 flex items-center justify-between gap-4">
          <!-- Logo / Brand -->
          <div class="flex items-center gap-3">
            <div class="h-10 w-10 rounded-2xl fep-gradient flex items-center justify-center shadow-lg">
              <span class="text-white font-display text-xl">F</span>
            </div>
            <div class="leading-tight">
              <div class="font-display text-lg sm:text-xl text-slate-900 tracking-tight">
                FandomEntryPass
              </div>
              <p class="text-xs sm:text-[0.7rem] text-slate-500">
                Fan-to-fan tickets ‚Ä¢ K-pop beta
              </p>
            </div>
          </div>

          <!-- Nav -->
          <nav class="flex items-center gap-2 sm:gap-4 text-xs sm:text-sm">
            <button id="navHome" class="px-3 py-1.5 rounded-full text-slate-600 hover:text-slate-900 hover:bg-slate-100 font-medium transition">
              Home
            </button>
            <button id="navMarketplace" class="px-3 py-1.5 rounded-full text-slate-600 hover:text-slate-900 hover:bg-slate-100 font-medium transition">
              Marketplace
            </button>
            <button id="navAbout" class="px-3 py-1.5 rounded-full text-slate-600 hover:text-slate-900 hover:bg-slate-100 font-medium transition">
              About
            </button>
            <button id="navSupport" class="px-3 py-1.5 rounded-full text-slate-600 hover:text-slate-900 hover:bg-slate-100 font-medium transition">
              Support
            </button>

            <!-- Seller CTA / Dashboard -->
            <div class="hidden sm:flex items-center gap-2">
              <button id="openSeller" class="hidden px-3 py-1.5 rounded-full border border-sky-200/80 bg-sky-50 text-sky-700 font-medium text-xs sm:text-sm hover:bg-sky-100 hover:border-sky-300 transition">
                Become a Seller
              </button>
              <button id="btnSellerDashboard" class="hidden px-3 py-1.5 rounded-full bg-slate-900 text-slate-50 font-medium text-xs sm:text-sm hover:bg-slate-800 transition">
                My Seller Dashboard
              </button>
              <button id="btnLogout" class="hidden px-3 py-1.5 rounded-full border border-slate-300 text-slate-600 text-xs sm:text-sm hover:bg-slate-100 transition">
                Logout
              </button>
            </div>
          </nav>

          <!-- Mobile seller buttons -->
          <div class="flex sm:hidden items-center gap-2">
            <button id="openSellerMobile" class="hidden px-2.5 py-1.5 rounded-full border border-sky-200/80 bg-sky-50 text-sky-700 font-medium text-xs hover:bg-sky-100 hover:border-sky-300 transition">
              Sell
            </button>
            <button id="btnSellerDashboardMobile" class="hidden px-2.5 py-1.5 rounded-full bg-slate-900 text-slate-50 font-medium text-xs hover:bg-slate-800 transition">
              Dashboard
            </button>
            <button id="btnLogoutMobile" class="hidden px-2.5 py-1.5 rounded-full border border-slate-300 text-slate-600 text-xs hover:bg-slate-100 transition">
              Out
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Main content -->
    <main class="flex-1">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8">

        <!-- Welcome / Intro Screen (first visit gate) -->
        <section id="welcomeScreen" class="hidden">
          <div class="max-w-3xl mx-auto">
            <div class="fep-card rounded-3xl bg-white/95 border border-slate-200/80 p-6 sm:p-8 mb-6">
              <div class="flex items-center gap-3 mb-4">
                <div class="h-10 w-10 rounded-2xl fep-gradient flex items-center justify-center">
                  <span class="text-white font-display text-xl">F</span>
                </div>
                <div>
                  <h1 class="font-display text-2xl sm:text-3xl text-slate-900 tracking-tight">
                    Welcome to FandomEntryPass üíñ
                  </h1>
                  <p class="text-sm text-slate-600">
                    A safer, fan-to-fan ticket exchange built for K-pop fans first.
                  </p>
                </div>
              </div>

              <p class="text-sm sm:text-base text-slate-700 mb-4">
                Ticket days shouldn‚Äôt feel like a boss battle. FandomEntryPass was built so fans can help each other out, share extra tickets, and avoid scalpers and sketchy resellers. No bots. No wild markups. Just fans supporting fans.
              </p>

              <div class="grid sm:grid-cols-2 gap-4 mb-6">
                <div class="rounded-2xl border border-slate-100 bg-slate-50/80 p-4">
                  <h2 class="font-heading text-sm text-slate-900 mb-1.5">
                    How it works
                  </h2>
                  <ul class="space-y-1.5 text-xs text-slate-700">
                    <li>‚Ä¢ Browse verified listings from real fans.</li>
                    <li>‚Ä¢ Pay safely through Stripe with escrow.</li>
                    <li>‚Ä¢ Seller sends tickets + uploads proof.</li>
                    <li>‚Ä¢ You confirm you got them ‚Üí then they get paid.</li>
                  </ul>
                </div>
                <div class="rounded-2xl border border-sky-50 bg-sky-50/60 p-4">
                  <h2 class="font-heading text-sm text-slate-900 mb-1.5">
                    Fees in plain language
                  </h2>
                  <ul class="space-y-1.5 text-xs text-slate-700">
                    <li>‚Ä¢ Buyer fee: $5 per ticket.</li>
                    <li>‚Ä¢ Seller fee: 5% + $1 per ticket (with caps).</li>
                    <li>‚Ä¢ Stripe fees: charged by Stripe, not us.</li>
                    <li>‚Ä¢ Sellers always see their real profit vs face value.</li>
                  </ul>
                </div>
              </div>

              <p class="text-xs text-slate-500 mb-4">
                For all the fine print and deeper explanations, please check the FAQ, Terms &amp; Conditions, and Privacy Policy links in the footer.
              </p>

              <div class="flex flex-col sm:flex-row sm:items-center gap-3">
                <button id="welcomeEnter" class="inline-flex items-center justify-center px-5 py-2.5 rounded-full fep-gradient text-white font-heading text-sm shadow-md hover:shadow-lg fep-pill transition">
                  Enter Marketplace
                </button>
                <button id="welcomeWaitlist" class="inline-flex items-center justify-center px-4 py-2 rounded-full border border-slate-300/80 bg-white/80 text-slate-700 text-xs font-medium hover:bg-slate-100/90 transition">
                  Not here for K-pop? Join the waitlist for your fandom.
                </button>
              </div>
            </div>
          </div>
        </section>

        <!-- Marketplace / Home -->
        <section id="marketplaceView" class="space-y-6">
          <!-- Hero -->
          <div class="relative overflow-hidden rounded-3xl bg-slate-900 text-slate-50 fep-card">
            <div class="absolute inset-0 opacity-60" style="background: radial-gradient(circle at top left, #ff8fab 0, transparent 55%), radial-gradient(circle at top right, #4face7 0, transparent 55%), radial-gradient(circle at bottom, #7ee0cb 0, transparent 55%);"></div>
            <div class="relative flex flex-col sm:flex-row items-center sm:items-stretch gap-4 sm:gap-8 p-5 sm:p-8">
              <div class="flex-1">
                <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-slate-900/60 border border-slate-700 text-[0.65rem] sm:text-xs font-medium mb-2">
                  <span class="inline-flex h-5 w-5 items-center justify-center rounded-full bg-emerald-400/90 text-slate-900 text-xs">‚úì</span>
                  <span>Admin-verified tickets ‚Ä¢ Escrow-protected payments</span>
                </div>
                <h1 class="font-display text-2xl sm:text-3xl md:text-4xl tracking-tight mb-2 sm:mb-3 drop-shadow-[0_2px_4px_rgba(15,23,42,0.8)]">
                  FandomEntryPass
                </h1>
                <p class="text-sm sm:text-base text-slate-100/95 max-w-md drop-shadow-[0_1px_3px_rgba(15,23,42,0.9)]">
                  Your trusted fan-to-fan ticket marketplace ‚ú® Built for K-pop fans first, with strict anti-scalper rules, +15% price caps, and real ticket verification.
                </p>
                <div class="mt-4 flex flex-wrap items-center gap-2 text-[0.65rem] sm:text-xs text-slate-200/90">
                  <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full bg-slate-900/70 border border-slate-700">
                    <span class="h-1.5 w-1.5 rounded-full bg-emerald-400"></span>
                    K-pop beta live
                  </span>
                  <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full bg-slate-900/70 border border-slate-700">
                    15% cap over face value
                  </span>
                  <span class="inline-flex items-center gap-1 px-2 py-1 rounded-full bg-slate-900/70 border border-slate-700">
                    No bots ‚Ä¢ No price-gouging
                  </span>
                </div>
              </div>
              <div class="w-full sm:w-64 md:w-72">
                <div class="bg-slate-900/60 border border-slate-700 rounded-2xl p-4">
                  <h2 class="font-heading text-sm text-slate-50 mb-2">Quick Filters</h2>
                  <div class="space-y-3">
                    <div>
                      <label class="block text-[0.7rem] text-slate-300 mb-1">Search</label>
                      <input id="filterSearch" type="text" placeholder="Group, city, date..." class="w-full rounded-xl bg-slate-800/80 border border-slate-700 text-slate-100 text-xs px-3 py-1.5 placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-sky-400/70 focus:border-sky-400/70">
                    </div>
                    <div class="grid grid-cols-2 gap-2">
                      <div>
                        <label class="block text-[0.7rem] text-slate-300 mb-1">Max Price</label>
                        <input id="filterMaxPrice" type="number" min="0" class="w-full rounded-xl bg-slate-800/80 border border-slate-700 text-slate-100 text-xs px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-sky-400/70 focus:border-sky-400/70">
                      </div>
                      <div>
                        <label class="block text-[0.7rem] text-slate-300 mb-1">City</label>
                        <input id="filterCity" type="text" class="w-full rounded-xl bg-slate-800/80 border border-slate-700 text-slate-100 text-xs px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-sky-400/70 focus:border-sky-400/70">
                      </div>
                    </div>
                    <button id="filterReset" class="w-full inline-flex justify-center px-3 py-1.5 rounded-full bg-slate-50 text-slate-900 text-xs font-semibold hover:bg-white transition">
                      Clear Filters
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Marketplace content -->
          <div class="flex flex-col lg:flex-row gap-6 items-start">
            <!-- Left: listings -->
            <div class="flex-1 space-y-4">
              <div class="flex items-center justify-between gap-3">
                <h2 class="font-heading text-base sm:text-lg text-slate-900">
                  Available Listings
                </h2>
                <button id="btnBecomeSellerTop" class="hidden sm:inline-flex items-center gap-2 px-3 py-1.5 rounded-full border border-sky-200 bg-sky-50 text-sky-700 text-xs font-semibold hover:bg-sky-100 hover:border-sky-300 transition">
                  <span>+ Create a Listing</span>
                </button>
              </div>

              <div id="listingsContainer" class="grid sm:grid-cols-2 gap-4">
                <!-- dynamically rendered -->
              </div>

              <p id="emptyState" class="hidden text-xs sm:text-sm text-slate-500 text-center border border-dashed border-slate-300/80 rounded-2xl py-6">
                No verified listings yet. Check back soon or share FandomEntryPass with your mutuals üíå
              </p>
            </div>

            <!-- Right: safety / how it works -->
            <aside class="w-full lg:w-72 space-y-4">
              <div class="rounded-2xl bg-white border border-slate-200/80 p-4 fep-card">
                <h3 class="font-heading text-sm text-slate-900 mb-1.5">
                  Safety first üßø
                </h3>
                <ul class="space-y-1.5 text-xs text-slate-700">
                  <li>‚Ä¢ Listings are admin-verified before going live.</li>
                  <li>‚Ä¢ Sellers must upload proof of real tickets.</li>
                  <li>‚Ä¢ Payments are held in escrow until you confirm receipt.</li>
                  <li>‚Ä¢ All prices must stay within +15% of face value.</li>
                </ul>
              </div>
              <div class="rounded-2xl bg-sky-50/80 border border-sky-100 p-4">
                <h3 class="font-heading text-sm text-slate-900 mb-1.5">
                  Not here for K-pop?
                </h3>
                <p class="text-xs text-slate-700 mb-2">
                  We‚Äôre in K-pop beta for now, but we want to support more fandoms soon. Join the waitlist and tell us who you stan.
                </p>
                <button id="btnWaitlistAside" class="inline-flex items-center justify-center px-3 py-1.5 rounded-full bg-sky-500 text-white text-xs font-medium hover:bg-sky-600 transition">
                  Join waitlist for other fandoms
                </button>
              </div>
            </aside>
          </div>
        </section>

        <!-- About page -->
        <section id="aboutView" class="hidden max-w-3xl mx-auto space-y-4">
          <div class="fep-card rounded-3xl bg-white border border-slate-200/80 p-6 sm:p-8">
            <h1 class="font-display text-2xl sm:text-3xl text-slate-900 mb-3 tracking-tight">
              About FandomEntryPass
            </h1>
            <section class="space-y-3 text-sm text-slate-700">
              <div>
                <h2 class="font-heading text-base text-slate-900 mb-1">Why I built this</h2>
                <p>
                  FandomEntryPass was created by a K-pop fan for K-pop fans. I was tired of watching scalpers, bots, and shady resellers make concerts stressful and expensive. Fans deserve a safe place to buy and sell tickets without feeling like they‚Äôre getting played.
                  This app is my way of saying: we can do this better, together.
                </p>
              </div>
              <div>
                <h2 class="font-heading text-base text-slate-900 mb-1">What FandomEntryPass does</h2>
                <ul class="list-disc list-inside space-y-1">
                  <li>Fair pricing with a +15% cap over face value.</li>
                  <li>Escrow protection so money only moves when tickets do.</li>
                  <li>Admin-verified listings with proof required.</li>
                  <li>Tools to keep buyers and sellers on the same page.</li>
                </ul>
              </div>
              <div>
                <h2 class="font-heading text-base text-slate-900 mb-1">Why K-pop first?</h2>
                <p>
                  K-pop fandoms inspired this app. The passion, creativity, and chaos of ticketing made it clear we needed something built for us. Right now, FandomEntryPass is in beta for K-pop fans only, so we can test everything in a real community before expanding.
                </p>
              </div>
              <div>
                <h2 class="font-heading text-base text-slate-900 mb-1">What‚Äôs coming next</h2>
                <ul class="list-disc list-inside space-y-1">
                  <li>Support for more artists, tours, and fandoms.</li>
                  <li>Stronger tools for escrow and disputes.</li>
                  <li>A dedicated mobile app experience.</li>
                </ul>
              </div>
              <div>
                <h2 class="font-heading text-base text-slate-900 mb-1">Where to learn more</h2>
                <p>
                  Want the full details on fees, safety, and policies? Check the FAQ, Terms &amp; Conditions, and Privacy Policy links in the footer.
                </p>
              </div>
            </section>
          </div>
        </section>

        <!-- Support page -->
        <section id="supportView" class="hidden max-w-3xl mx-auto space-y-4">
          <div class="fep-card rounded-3xl bg-white border border-slate-200/80 p-6 sm:p-8">
            <h1 class="font-display text-2xl sm:text-3xl text-slate-900 mb-3 tracking-tight">
              Support &amp; Contact
            </h1>
            <p class="text-sm text-slate-700 mb-4">
              Need help with an order, dispute, or listing? You‚Äôre in the right place. FandomEntryPass is a small, fan-run platform, so clear communication helps us help you faster. üíå
            </p>

            <div class="space-y-4 text-sm text-slate-700">
              <section>
                <h2 class="font-heading text-base text-slate-900 mb-1">For buyers</h2>
                <p class="mb-1">Contact us if:</p>
                <ul class="list-disc list-inside space-y-1">
                  <li>You didn‚Äôt receive tickets after the seller marked them as sent.</li>
                  <li>You received the wrong tickets.</li>
                  <li>You suspect a fake or invalid ticket.</li>
                </ul>
                <p class="mt-1 text-xs text-slate-600">
                  Please include your order ID, event name &amp; date, and any helpful screenshots.
                </p>
              </section>
              <section>
                <h2 class="font-heading text-base text-slate-900 mb-1">For sellers</h2>
                <p class="mb-1">Contact us if:</p>
                <ul class="list-disc list-inside space-y-1">
                  <li>Your payout seems delayed or missing.</li>
                  <li>A buyer claims they didn‚Äôt receive tickets you sent.</li>
                  <li>You‚Äôre having trouble uploading proof or managing a listing.</li>
                </ul>
              </section>
              <section>
                <h2 class="font-heading text-base text-slate-900 mb-1">How to reach us</h2>
                <p>
                  For all support, email the admin at:
                  <span class="font-mono text-slate-900 text-xs">Alexisdeshong99@gfcleaners.com</span>
                </p>
              </section>

              <section class="border-t border-slate-200 pt-3">
                <h2 class="font-heading text-base text-slate-900 mb-1">Quick links</h2>
                <div class="flex flex-wrap gap-2 text-xs">
                  <button data-nav-footer="faq" class="px-3 py-1.5 rounded-full border border-slate-300 bg-slate-50 text-slate-700 hover:bg-slate-100 transition">
                    FAQ
                  </button>
                  <button data-nav-footer="terms" class="px-3 py-1.5 rounded-full border border-slate-300 bg-slate-50 text-slate-700 hover:bg-slate-100 transition">
                    Terms &amp; Conditions
                  </button>
                  <button data-nav-footer="privacy" class="px-3 py-1.5 rounded-full border border-slate-300 bg-slate-50 text-slate-700 hover:bg-slate-100 transition">
                    Privacy Policy
                  </button>
                </div>
              </section>
            </div>
          </div>
        </section>

        <!-- FAQ -->
        <section id="faqView" class="hidden max-w-3xl mx-auto space-y-4">
          <div class="fep-card rounded-3xl bg-white border border-slate-200/80 p-6 sm:p-8">
            <h1 class="font-display text-2xl sm:text-3xl text-slate-900 mb-3 tracking-tight">
              Frequently Asked Questions (FAQ)
            </h1>

            <div class="space-y-4 text-sm text-slate-700">
              <section>
                <h2 class="font-heading text-base text-slate-900 mb-1">üé´ About FandomEntryPass</h2>
                <p class="mb-1">
                  <strong>Q: What is FandomEntryPass?</strong><br>
                  A: FandomEntryPass is a fan-to-fan ticket exchange designed to keep prices fair, avoid scams, and create a safe place for fans to buy and sell tickets. We currently serve K-POP fans during our beta launch period.
                </p>
                <p>
                  <strong>Q: Why is the app only for KPOP fans right now?</strong><br>
                  A: This is our beta phase, and KPOP communities inspired the platform. We will expand to all fandoms later.
                </p>
              </section>

              <section>
                <h2 class="font-heading text-base text-slate-900 mb-1">üë• Buyers ‚Äî Fees, Taxes &amp; Payment</h2>
                <p class="mb-1">
                  <strong>Q: Why is there a $5 buyer fee per ticket?</strong><br>
                  A: This fee supports:
                </p>
                <ul class="list-disc list-inside space-y-1">
                  <li>App maintenance</li>
                  <li>Server costs</li>
                  <li>Escrow system</li>
                  <li>Fan engagement projects</li>
                  <li>Anti-scam systems</li>
                </ul>
                <p class="mt-1">
                  It‚Äôs NOT a tax and NOT paid to sellers.
                </p>
                <p class="mt-2">
                  <strong>Q: Are buyers charged tax?</strong><br>
                  A: No. FandomEntryPass is not the seller of tickets and does not act as a marketplace facilitator. Tickets are resold by fans, and any applicable taxes were already paid at the original point of sale. Our platform fees are non-taxable digital service fees.
                </p>
                <p class="mt-2">
                  <strong>Q: Why don‚Äôt buyers need to create an account?</strong><br>
                  A: We intentionally do NOT require buyer login. Many platforms collect unnecessary personal information to re-sell or monetize. We do not. Buyers only need:
                </p>
                <ul class="list-disc list-inside space-y-1">
                  <li>A name</li>
                  <li>An email</li>
                  <li>Payment details</li>
                </ul>
                <p class="mt-1">
                  Nothing else.
                </p>
                <p class="mt-2">
                  <strong>Q: How does payment work?</strong><br>
                  A: Buyers pay through Stripe, and funds are securely held in escrow until the seller sends the ticket and uploads proof.
                </p>
              </section>

              <section>
                <h2 class="font-heading text-base text-slate-900 mb-1">üí∏ Sellers ‚Äî Fees, Payouts &amp; Profit</h2>
                <p class="mb-1">
                  <strong>Q: What fees do sellers pay?</strong><br>
                  A: Per ticket:
                </p>
                <ul class="list-disc list-inside space-y-1">
                  <li>5% seller fee (platform operations)</li>
                  <li>$1 flat fee (fan engagement fund)</li>
                  <li>Stripe processing fees (charged by Stripe, not us)</li>
                </ul>
                <p class="mt-1">
                  Seller fee caps:
                </p>
                <ul class="list-disc list-inside space-y-1">
                  <li>Max $25 on totals under $600</li>
                  <li>Max $35 on totals $600+</li>
                </ul>
                <p class="mt-1">
                  All fees scale by ticket quantity.
                </p>
                <p class="mt-2">
                  <strong>Q: Do sellers pay Stripe fees?</strong><br>
                  A: Yes. Stripe charges their own processing fee for payouts. This is separate from our platform fees.
                </p>
                <p class="mt-2">
                  <strong>Q: Do seller fees apply per order or per ticket?</strong><br>
                  A: Per ticket, always.
                </p>
                <p class="mt-2">
                  <strong>Q: Will I see my real profit?</strong><br>
                  A: Yes. During listing creation, sellers see:
                </p>
                <ul class="list-disc list-inside space-y-1">
                  <li>Price per ticket</li>
                  <li>Face value</li>
                  <li>Platform fees per ticket</li>
                  <li>Estimated Stripe fees</li>
                  <li>Estimated profit per ticket after fees</li>
                  <li>A warning if they‚Äôre listing below face value after all fees</li>
                </ul>
                <p class="mt-2">
                  <strong>Q: What is the 15% pricing rule?</strong><br>
                  A: Sellers can list tickets at up to 15% above face value. Higher prices trigger a warning.
                </p>
              </section>

              <section>
                <h2 class="font-heading text-base text-slate-900 mb-1">üîí Safety &amp; Anti-Scam System</h2>
                <p class="mb-1">
                  <strong>Q: How does the ticket verification system work?</strong><br>
                  A: Every listing must be verified by the admin. Sellers upload ticket proof, and listings remain hidden until verified.
                </p>
                <p class="mt-2">
                  <strong>Q: How does escrow protect me?</strong><br>
                  A: Buyer funds are held securely in escrow. Sellers only get paid after buyers confirm receipt or after admin approval in a dispute.
                </p>
                <p class="mt-2">
                  <strong>Q: What if something goes wrong?</strong><br>
                  A: Orders can go into dispute, and the admin manually reviews the situation and resolves the issue.
                </p>
              </section>

              <section>
                <h2 class="font-heading text-base text-slate-900 mb-1">üì§ Order &amp; Escrow Process</h2>
                <p class="mb-1">
                  In simple terms:
                </p>
                <ul class="list-disc list-inside space-y-1">
                  <li>Buyer purchases ‚Üí funds go into escrow.</li>
                  <li>Seller has a time window (based on how close the event is) to send the ticket and upload proof.</li>
                  <li>Buyer can cancel the order until the seller uploads proof and clicks that they sent the ticket.</li>
                  <li>Once proof is uploaded, the buyer must confirm ‚ÄúYes, I received the ticket‚Äù or ‚ÄúNo, I did not receive the ticket.‚Äù</li>
                  <li>If the buyer does nothing by their deadline, the order may auto-complete based on escrow rules.</li>
                  <li>If buyer says ‚Äúnot received,‚Äù the order goes into dispute and the admin steps in.</li>
                  <li>If the seller misses their sending deadline, the buyer is automatically refunded.</li>
                </ul>
              </section>

              <section>
                <h2 class="font-heading text-base text-slate-900 mb-1">üåé Expansion &amp; Future Features</h2>
                <p class="mb-1">
                  <strong>Q: Will this expand to non-K-pop artists?</strong><br>
                  A: Yes, after beta stabilizes and systems are fully tested.
                </p>
                <p class="mt-2">
                  <strong>Q: Will there be mobile apps?</strong><br>
                  A: Yes, a full iOS/Android experience is on the roadmap. For now, FandomEntryPass works as a mobile-friendly web app.
                </p>
              </section>
            </div>
          </div>
        </section>

        <!-- Terms & Conditions -->
        <section id="termsView" class="hidden max-w-3xl mx-auto space-y-4">
          <div class="fep-card rounded-3xl bg-white border border-slate-200/80 p-6 sm:p-8">
            <h1 class="font-display text-2xl sm:text-3xl text-slate-900 mb-3 tracking-tight">
              Terms &amp; Conditions
            </h1>

            <div class="space-y-3 text-sm text-slate-700">
              <p><strong>1. FandomEntryPass Role</strong><br>
                FandomEntryPass is not the seller of tickets. All tickets are sold directly by fans.
                FandomEntryPass provides listing tools, escrow payment handling, verification, and anti-scam measures.
                We are not responsible for the condition, accuracy, or delivery of third-party tickets.
              </p>
              <p><strong>2. No Tax Collection</strong><br>
                FandomEntryPass does not collect sales tax on ticket transactions. Taxes were paid at the original point of sale.
                Platform fees are non-taxable digital service fees.
              </p>
              <p><strong>3. Fees</strong><br>
                Buyers and sellers agree to our fee structure:
              </p>
              <ul class="list-disc list-inside space-y-1">
                <li>Buyer fee: $5 per ticket</li>
                <li>Seller fee: 5% per ticket</li>
                <li>Seller flat fee: $1 per ticket</li>
                <li>Seller fee caps: $25 under $600 / $35 above $600</li>
                <li>Stripe fees (charged by Stripe, not FandomEntryPass)</li>
              </ul>
              <p class="mt-1">
                Fees are non-refundable except when a full order is cancelled or refunded under our escrow rules.
              </p>
              <p><strong>4. Escrow</strong><br>
                Funds are held in escrow until both parties complete the ticket transfer process and/or disputes are resolved.
              </p>
              <p><strong>5. Verification</strong><br>
                Listings may require admin verification. FandomEntryPass may approve or reject any listing at our discretion.
              </p>
              <p><strong>6. Disputes</strong><br>
                If a buyer reports ‚Äúdidn‚Äôt receive,‚Äù the order moves to dispute.
                FandomEntryPass will review the available information and make a final determination on refund or payout.
              </p>
              <p><strong>7. User Responsibilities</strong><br>
                Users agree to:
              </p>
              <ul class="list-disc list-inside space-y-1">
                <li>Provide accurate information</li>
                <li>Send/receive tickets promptly</li>
                <li>Avoid fraudulent behavior</li>
                <li>Follow the 15% pricing rule</li>
                <li>Upload valid and accurate proof of tickets and transfers</li>
              </ul>
              <p><strong>8. Beta Status</strong><br>
                The platform is currently in beta, limited to KPOP fans. Features, flows, and policies may change as we improve the platform.
              </p>
              <p><strong>9. Liability</strong><br>
                FandomEntryPass is not liable for:
              </p>
              <ul class="list-disc list-inside space-y-1">
                <li>Ticket invalidity</li>
                <li>Seller or buyer behavior</li>
                <li>Event cancellations, postponements, or changes</li>
                <li>Losses arising from third-party ticket platforms or transfer systems</li>
              </ul>
              <p><strong>10. Agreement</strong><br>
                By using the platform, users agree to these Terms &amp; Conditions.
              </p>
            </div>
          </div>
        </section>

        <!-- Privacy Policy -->
        <section id="privacyView" class="hidden max-w-3xl mx-auto space-y-4">
          <div class="fep-card rounded-3xl bg-white border border-slate-200/80 p-6 sm:p-8">
            <h1 class="font-display text-2xl sm:text-3xl text-slate-900 mb-3 tracking-tight">
              Privacy Policy
            </h1>
            <div class="space-y-3 text-sm text-slate-700">
              <p><strong>Last updated:</strong> <span id="privacyDate"></span></p>
              <p>
                FandomEntryPass (‚Äúwe,‚Äù ‚Äúour,‚Äù ‚Äúthe platform‚Äù) is committed to protecting your privacy. This Privacy Policy explains how we collect, use, and safeguard information when you use our website or services.
              </p>
              <p><strong>1. What Information We Collect</strong><br>
                <em>Buyers (no login required):</em> We collect only:
              </p>
              <ul class="list-disc list-inside space-y-1">
                <li>Name</li>
                <li>Email</li>
                <li>Payment information (processed securely by Stripe)</li>
                <li>Ticket-related transaction data</li>
              </ul>
              <p>
                We do not create buyer accounts and we do not store full payment card details.
              </p>
              <p><em>Sellers:</em> We collect:</p>
              <ul class="list-disc list-inside space-y-1">
                <li>Email</li>
                <li>Verification codes</li>
                <li>Listing information</li>
                <li>Uploaded ticket proof images</li>
                <li>Transaction and payout information</li>
              </ul>
              <p><em>Automatically collected data:</em> We may collect basic analytics (page visits, device info) and error logs. Cookies are used for seller session management only.</p>
              <p><strong>2. How We Use Your Information</strong><br>
                We use collected information to:
              </p>
              <ul class="list-disc list-inside space-y-1">
                <li>Facilitate fan-to-fan ticket sales</li>
                <li>Operate the secure escrow system</li>
                <li>Verify ticket authenticity</li>
                <li>Prevent fraud and abuse</li>
                <li>Process payments and payouts</li>
                <li>Improve the platform during beta testing</li>
                <li>Communicate order updates</li>
                <li>Resolve disputes and support requests</li>
              </ul>
              <p>We never sell your information to advertisers.</p>
              <p><strong>3. Payments &amp; Security</strong><br>
                All payments are handled securely by Stripe. FandomEntryPass does not store full payment card details.
              </p>
              <p><strong>4. Cookies &amp; Tracking</strong><br>
                We use cookies only for keeping sellers logged in and for basic platform functionality. We do not use cookies for advertising, behavioral tracking, or retargeting.
              </p>
              <p><strong>5. Ticket Images &amp; Proof Uploads</strong><br>
                Sellers upload ticket proof images for verification and fraud prevention. These images are stored securely and accessed only by admin as appropriate within escrow and dispute processes. They are never displayed publicly.
              </p>
              <p><strong>6. Data Sharing</strong><br>
                We may share information only with:
              </p>
              <ul class="list-disc list-inside space-y-1">
                <li>Stripe (for payments and payouts)</li>
                <li>If required by law or regulation</li>
                <li>Internal tools used for platform operations</li>
              </ul>
              <p>We do not share your information with third-party marketers or advertising networks.</p>
              <p><strong>7. User Rights</strong><br>
                You may request deletion, correction, or access to your data by contacting us at:
                <span class="font-mono text-slate-900 text-xs">Alexisdeshong99@gfcleaners.com</span>.
              </p>
              <p><strong>8. Beta Platform Disclosure</strong><br>
                FandomEntryPass is currently in beta, serving primarily K-POP fans. Features and data flows may change as we refine the platform.
              </p>
              <p><strong>9. Children‚Äôs Privacy</strong><br>
                FandomEntryPass is not intended for users under 13. We do not knowingly collect data from minors.
              </p>
              <p><strong>10. Policy Changes</strong><br>
                We may update this Privacy Policy periodically. Updated versions will include a new ‚Äúlast updated‚Äù date.
              </p>
              <p><strong>11. Contact</strong><br>
                For questions, requests, or support, please contact the admin email listed above.
              </p>
            </div>
          </div>
        </section>

        <!-- Waitlist -->
        <section id="waitlistView" class="hidden max-w-xl mx-auto space-y-4">
          <div class="fep-card rounded-3xl bg-white border border-slate-200/80 p-6 sm:p-8">
            <h1 class="font-display text-2xl sm:text-3xl text-slate-900 mb-3 tracking-tight">
              Waitlist for Other Fandoms üíå
            </h1>
            <p class="text-sm text-slate-700 mb-4">
              FandomEntryPass is in beta for K-pop fans right now, but you‚Äôre not forgotten.
              If you‚Äôve got tickets or fandom love outside of K-pop, drop your email and who you stan.
              When we open the gates to more artists and fandoms, you‚Äôll be the first to know. ‚ú®
            </p>
            <form id="waitlistForm" class="space-y-3">
              <div>
                <label class="block text-xs font-medium text-slate-800 mb-1">Email</label>
                <input name="email" type="email" required class="w-full rounded-xl border border-slate-300 bg-slate-50 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-400/70 focus:border-sky-400/70">
              </div>
              <div>
                <label class="block text-xs font-medium text-slate-800 mb-1">Fandom / Artist / Event type (optional)</label>
                <input name="fandom" type="text" placeholder="e.g., Taylor Swift, Beyonc√©, Anime cons..." class="w-full rounded-xl border border-slate-300 bg-slate-50 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-400/70 focus:border-sky-400/70">
              </div>
              <button type="submit" class="inline-flex items-center justify-center px-4 py-2 rounded-full fep-gradient text-white text-sm font-semibold shadow-md hover:shadow-lg transition">
                Join the Waitlist
              </button>
              <p id="waitlistMessage" class="text-xs text-slate-600 mt-2"></p>
            </form>
          </div>
        </section>

        <!-- Seller Dashboard -->
        <section id="sellerDashboardView" class="hidden space-y-6">
          <div class="flex flex-col md:flex-row md:items-center justify-between gap-3">
            <div>
              <h1 class="font-display text-xl sm:text-2xl text-slate-900 tracking-tight">
                Seller Dashboard
              </h1>
              <p class="text-xs sm:text-sm text-slate-600">
                Manage your listings, view orders, and stay in control of every ticket you sell.
              </p>
            </div>
            <div class="flex flex-wrap items-center gap-2 text-xs">
              <button id="btnCreateListingFromDashboard" class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-slate-900 text-slate-50 font-medium hover:bg-slate-800 transition">
                <span>+ Create Listing</span>
              </button>
            </div>
          </div>

          <!-- My Listings -->
          <section class="rounded-3xl bg-white border border-slate-200/80 p-4 sm:p-5 fep-card">
            <div class="flex items-center justify-between gap-2 mb-3">
              <h2 class="font-heading text-sm sm:text-base text-slate-900">My Listings</h2>
              <p id="myListingsCount" class="text-[0.75rem] text-slate-500"></p>
            </div>
            <div id="myListingsContainer" class="space-y-3">
              <!-- seller listings -->
            </div>
            <p id="myListingsEmpty" class="hidden text-xs text-slate-500 border border-dashed border-slate-300 rounded-2xl p-3 text-center">
              No active listings yet. Create your first one to start helping other fans.
            </p>
          </section>

          <!-- My Orders (seller view) -->
          <section class="rounded-3xl bg-white border border-slate-200/80 p-4 sm:p-5 fep-card">
            <div class="flex items-center justify-between gap-2 mb-3">
              <h2 class="font-heading text-sm sm:text-base text-slate-900">Orders for Your Listings</h2>
              <p class="text-[0.75rem] text-slate-500">
                Track when buyers purchase, send tickets, and monitor escrow status.
              </p>
            </div>
            <div id="sellerOrdersContainer" class="space-y-3">
              <!-- orders -->
              <p class="text-xs text-slate-500 border border-dashed border-slate-300 rounded-2xl p-3 text-center">
                Orders will appear here when buyers purchase your tickets.
              </p>
            </div>
          </section>
        </section>

        <!-- Modals: Add listing, Edit listing, Checkout, etc. -->
        <!-- ... (your existing modal markup stays exactly the same; omitted here for brevity in this explanation) ... -->

      </div>
    </main>
  </div>

  <!-- Footer -->
  <footer class="border-t border-slate-200/80 bg-white/95 mt-8">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col sm:flex-row items-center justify-between gap-3">
      <nav class="flex flex-wrap items-center gap-3 text-xs text-slate-600">
        <button data-nav-footer="marketplace" class="hover:text-slate-900">Marketplace</button>
        <button data-nav-footer="about" class="hover:text-slate-900">About</button>
        <button data-nav-footer="support" class="hover:text-slate-900">Support</button>
        <button data-nav-footer="faq" class="hover:text-slate-900">FAQ</button>
        <button data-nav-footer="terms" class="hover:text-slate-900">Terms &amp; Conditions</button>
        <button data-nav-footer="privacy" class="hover:text-slate-900">Privacy Policy</button>
        <button data-nav-footer="waitlist" class="hover:text-slate-900">Waitlist</button>
      </nav>
      <p class="text-[0.7rem] text-slate-500">
        ¬© <span id="footerYear"></span> FandomEntryPass. All Rights Reserved.
      </p>
    </div>
  </footer>

  <!-- Main Script -->
  <script>
    const ORIGIN = (typeof location !== "undefined")
      ? (location.origin || (location.protocol + "//" + location.host))
      : "";

    /* ===========================
       Storage + Helpers
       =========================== */
    const KEY = "fep_listings_v1";
    function load(){ try{ return JSON.parse(localStorage.getItem(KEY) || "[]") }catch{ return [] } }
    function save(list){ localStorage.setItem(KEY, JSON.stringify(list)) }
    async function syncListingsFromServer(){
      try{
        const res = await fetch(`${ORIGIN}/api/listings`);
        if (!res.ok) throw new Error("Failed to fetch listings");
        const data = await res.json();
        const rows = Array.isArray(data) ? data : (Array.isArray(data?.data) ? data.data : []);
        if (Array.isArray(rows)) {
          save(rows);
        }
      }catch(err){
        console.warn("Could not sync listings from server; using local cache only", err);
      }
    }

    const money = n => "$"+Number(n).toFixed(0);
    const money2 = n => "$"+(isFinite(n)? Number(n).toFixed(2) : "0.00");
    const capFor = face => Math.round(Number(face)*1.15);
    const withinCap = (face, price) => Number(price) <= capFor(face);
    const token = () =>
      btoa(String(Math.random()).slice(2) + String(Date.now()))
        .replace(/=/g,"")
        .slice(0,32);

    /* ... all your existing helpers, login logic, filters, modals, Stripe, escrow logic, etc. remain unchanged ... */

    // === CREATE LISTING (patched to sync with backend) ===
    document.getElementById("addForm").addEventListener("submit", async (e)=>{
      e.preventDefault();
      const fd=new FormData(e.target);
      const face=Number(fd.get("face"));
      const price=Number(fd.get("price"));
      const qty=Math.max(1, Number(fd.get("qty")||1));
      if(!withinCap(face,price)) return alert("This price exceeds the +15% cap. Please lower the price.");
      const proofFile=fd.get("proof");
      if(!proofFile || !proofFile.size) return alert("Proof of ticket is required. Please upload your proof image.");

      const sellerEmail=String(fd.get("sellerEmail")||"").trim();
      const sellerPhone=String(fd.get("sellerPhone")||"").trim();
      if(!sellerEmail || !sellerPhone) return alert("Seller email and phone are required for notifications.");

      // Ensure logged-in seller matches form email
      const current = loggedInSellerEmail();
      if (!current) return alert("Please log in as a seller first.");
      if ((sellerEmail || "").toLowerCase() !== current) {
        return alert("Seller email must match your logged-in seller account.");
      }

      const editToken = token();
      const manageCode = editToken.slice(0,10).toUpperCase();
      const sellerAccountId = localStorage.getItem("fep_connect_acct") || "";

      const listing = {
        id: crypto.randomUUID(),
        group: String(fd.get("group")||"").trim(),
        date: String(fd.get("date")||"").trim(),
        city: String(fd.get("city")||"").trim(),
        seat: String(fd.get("seat")||"").trim(),
        face, price, qty,
        remaining: qty,
        pay: String(fd.get("pay")||"").trim(),
        seller: String(fd.get("seller")||"Seller").trim(),
        sellerEmail, sellerPhone,
        sellerAccountId,
        editToken, manageCode
      };
      await sendProofViaFormspree(listing, proofFile);

      // Try to create listing in shared backend so it appears on all devices
      try{
        const res = await fetch(`${ORIGIN}/api/listings`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(listing)
        });
        if (!res.ok) {
          console.warn("Listings API POST failed, falling back to local-only listing", res.status);
          const list = load(); list.unshift(listing); save(list);
        } else {
          // Keep local cache in sync with server
          await syncListingsFromServer();
        }
      }catch(err){
        console.warn("Error calling listings API, falling back to local-only listing", err);
        const list = load(); list.unshift(listing); save(list);
      }

      try{
        const manageUrl = `${location.origin}${location.pathname}?manage=${editToken}`;
        await navigator.clipboard.writeText(manageUrl);
        alert(`Listing created!\n\nSeller manage code: ${manageCode}\n(Manage link copied to clipboard.)`);
      }catch{
        alert(`Listing created!\n\nSeller manage code: ${manageCode}`);
      }

      closeModal(); e.target.reset(); applyFilters(); window.scrollTo({ top:0, behavior:"smooth" });
      renderMyListings();
    });

    // === DELETE LISTING (patched) ===
    function deleteListing(id){
      if(!confirm("Delete this listing? This cannot be undone.")) return;
      // Optimistically remove from local cache
      const list = load().filter(x => x.id !== id);
      save(list);
      applyFilters();
      renderMyListings();

      // Also delete on backend so it disappears on other devices
      fetch(`${ORIGIN}/api/listings?id=eq.${encodeURIComponent(id)}`, {
        method: "DELETE",
        headers: { "Content-Type": "application/json" }
      }).then(res=>{
        if (!res.ok) {
          console.warn("Failed to delete listing on server", res.status);
        } else {
          // Re-sync to be sure local cache matches server
          syncListingsFromServer().catch(()=>{});
        }
      }).catch(err=>{
        console.warn("Error deleting listing on server", err);
      });
    }

    // === EDIT LISTING (patched tail) ===
    document.getElementById("editForm").addEventListener("submit", async (e)=>{
      e.preventDefault();
      const fd = new FormData(e.target);
      const id = fd.get("id");
      let list = load();
      const idx = list.findIndex(x => x.id === id);
      if (idx < 0) { alert("Listing not found."); return; }

      // build updated listing
      const face=Number(fd.get("face"));
      const price=Number(fd.get("price"));
      const qty=Math.max(1, Number(fd.get("qty")||1));
      if(!withinCap(face,price)) return alert("This price exceeds the +15% cap. Please lower the price.");

      const prev = list[idx];
      const prevRemaining = (prev.remaining ?? prev.qty ?? qty);
      const remaining = Math.max(0, Math.min(qty, prevRemaining));

      const updated = {
        ...prev,
        group: String(fd.get("group")||"").trim(),
        date: String(fd.get("date")||"").trim(),
        city: String(fd.get("city")||"").trim(),
        seat: String(fd.get("seat")||"").trim(),
        face, price, qty,
        remaining,
        pay: String(fd.get("pay")||"").trim(),
        seller: String(fd.get("seller")||"Seller").trim(),
        sellerEmail: String(fd.get("sellerEmail")||"").trim(),
        sellerPhone: String(fd.get("sellerPhone")||"").trim()
      };

      // If a new proof is attached, send to admin
      const proofFile = fd.get("proof");
      if (proofFile && proofFile.size) {
        await sendProofViaFormspree(updated, proofFile);
      }

      // Update local cache immediately
      list[idx] = updated;
      save(list);
      closeEditModal();
      applyFilters();
      renderMyListings();

      // Also update listing in backend so changes appear on all devices
      try{
        const res = await fetch(`${ORIGIN}/api/listings`, {
          method: "PATCH",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(updated)
        });
        if (!res.ok) {
          console.warn("Listings API PATCH failed; local cache may be ahead of server", res.status);
        } else {
          await syncListingsFromServer();
        }
      }catch(err){
        console.warn("Error calling listings API for update; local cache may be ahead of server", err);
      }

      alert("Listing updated.");
    });

    // === INIT (patched to sync from server first) ===
    (function init(){
      const yearEl = document.getElementById("footerYear");
      if (yearEl) yearEl.textContent = String(new Date().getFullYear());
      const privacyDateEl = document.getElementById("privacyDate");
      if (privacyDateEl) privacyDateEl.textContent = new Date().toLocaleDateString();

      // First try to sync from server so listings are shared across devices
      syncListingsFromServer()
        .catch(()=>{/* already logged */})
        .finally(()=>{
          applyFilters();
          document.getElementById("openSeller")?.classList.remove("hidden");
          updateSellerFeeUI();
          toggleSellerUI(); // show/hide Add buttons based on login
        });
    })();
  </script>
</body>
</html>

